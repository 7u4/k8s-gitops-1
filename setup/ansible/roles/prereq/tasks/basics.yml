---
- name: Sets timezone to New_York.
  command: timedatectl set-timezone America/New_York
  become: true

- name: Update APT package manager repositories cache.
  apt:
    update_cache: yes
  become: true

- name: Installing common tools.
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - htop
    - unzip
    - ntp
    - glances
    - iotop
    - jq
    - ceph-common
    - nethogs
    - iperf3
    - nfs-common
  become: true

- name: Disable SWAP
  shell: |
    swapoff -a
- name: Disable SWAP in fstab
  replace:
    path: /etc/fstab
    regexp: '^([^#].*?\sswap\s+sw\s+.*)$'
    replace: '# \1'
  become: true