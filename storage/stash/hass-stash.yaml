apiVersion: stash.appscode.com/v1alpha1
kind: Restic
metadata:
  name: stash-home-assistant
  namespace: default
spec:
  paused: false
  selector:
    matchLabels:
      app: home-assistant
  fileGroups:
    - path: /config
      retentionPolicyName: "keep-last-5"
  backend:
    azure:
      container: backups
      prefix: hass
    storageSecretName: azure-secret
    #local:
    #  mountPath: /mnt/backup/
    #persistentVolumeClaim:
    #  claimName: azure-backups-pvc
    #storageSecretName: restic-secret
  schedule: "@every 5m"
  volumeMounts:
    - mountPath: /config
      name: config
  retentionPolicies:
    - name: "keep-last-5"
      keepLast: 5
      prune: true
