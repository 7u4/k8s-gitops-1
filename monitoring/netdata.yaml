---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: netdata
  namespace: monitoring
  annotations:
    flux.weave.works/automated: "true"
    flux.weave.works/tag.chart-image: "semver:~1"
spec:
  releaseName: netdata
  chart:
    git: git@github.com:netdata/helmchart
    path: /
    ref: master
    version: 1.1.0
  values:
    image:
      repository: netdata/netdata
      tag: v1.16.1
    master:
      database:
        storageclass: rook-ceph-block
      alarms:
        storageclass: rook-ceph-block
    slave:
      tolerations:
      - operator: Exists
    notifications:
      slackurl: https://hooks.slack.com/services/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
      slackrecipient: "#alerts"
    ingress:
      hosts:
      - netdata.holthome.net
      annotations:
        kubernetes.io/ingress.class: traefik
