apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
    name: traefik-forward-auth
    namespace: kube-system
spec:
    interval: 5m
    chart:
        spec:
            # renovate: registryUrl=https://k8s-at-home.com/charts/
            chart: traefik-forward-auth
            version: 1.0.5
            sourceRef:
                kind: HelmRepository
                name: k8s-at-home-charts
                namespace: flux-system
            interval: 10m
    dependsOn:
    -   name: traefik
        namespace: kube-system
    -   name: dex
        namespace: kube-system
    values:
        replicaCount: 1
        autoscaling:
            enabled: false
            minReplicas: 2
            maxReplicas: 4
        image:
            repository: thomseddon/traefik-forward-auth
            tag: 2.2.0
        authHost: auth.holthome.net
        secret: ENC[AES256_GCM,data:VFiBqF25WHhEtTGCsNlEWguyXtbjAD+g9TSChujl4Z8VsFfq6lIuHRZg,iv:hkdXvG8d0frmQvHZ5tZcQzDF7uTaDsmNz3bJKw5VW6Q=,tag:GO++aDC7+9GJk3eiNvN5Vg==,type:str]
        cookie:
            domain: holthome.net
        default:
            provider: oidc
        providers:
            oidc:
                enabled: true
                issuerUrl: https://dex.holthome.net
                clientId: forward-auth
                clientSecret: ENC[AES256_GCM,data:XQTw1jEKHjfkXlddPaSEmbOy/8cj2vSSG+nXGp8p4bfgua3puDjiqd8K,iv:ifm8nETRPHzM/gBjqB7ke4m1pQ4JQA+xzWC7SN0ZW2o=,tag:RXpY375VAc87o6NqkTuUDA==,type:str]
        middleware:
            enabled: true
            name: forward-auth
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    lastmodified: '2021-02-11T20:50:52Z'
    mac: ENC[AES256_GCM,data:eZAxOOTwAOjN90EACp41zwhUU7Aahr9L6OpUuVZMbdRp0N3Y7Io5mS2SSOcscliMYSllsO7PpjVwC9X5VuPGEINLs7KdK5Fk5hpcspOEfZ3WmiqsFHRoD8+BUhLq8RDOj0fsB+wbMQ1EzOVrLl3pSaTZtCx0wfNijY/3ljLTkJE=,iv:U/fCz83Zra3GpCpWFiBYgfpJBrWirwm8xN/4EjhYlyk=,tag:4OJRIMVVjXO21fyNFbQ/hA==,type:str]
    pgp:
    -   created_at: '2021-02-11T20:34:10Z'
        enc: |
            -----BEGIN PGP MESSAGE-----

            hQIMA8oSIqtHvng8ARAAh+fKXM63saV2wvOoOoifmJ3rKLkHzUhobe/IgdtMh2oh
            7pFlbTJ2ZDNPl4Mxorevf2beBKYzm1cSFpiBvhXtgrEugFk3lBjXQAdF8QfiTT77
            NAzu1eowNKGuPnlUaw95NcFy3+Uxr9z/d2BGvL87wpRq5eugm+4eAZ5wIBrK6Sda
            V7q9VCvpSLV6KZrpZ2vWaYdSHth6XylQ5bCfwQSy+al5IYTxp/Xjwe+rE1kdewVO
            2woQqofKBM9HOkK6BQMtiIjrrIyZ7JrpvZrUIckTD/X1QXCO0VNrLD4KMRMk+frZ
            NDYg+nsiO/Y8BBN75DvR8ziZWNrHfR71iZZHevsKTxlA1Wrvbg2XdeprKkP+V/Yb
            7LSt3XEWBuU4hppL8WoGgXiO7QmAeqWH9XmC3ApHS23pJ9CXujthL6fNYZgrcXh4
            x/OQb3ONHvkD4BFq9RgaEnJyNbgvDl1UmKboVQdyDdbN/OMA66/zIunLxNs6KIp0
            f6j622XhYaetFhu+gf43Eb2TWeixqLZoFWBUH/WYAIPMuzuJE7iK4ay0XCzDX3vR
            0nr80IaZBGTtlqY1pz1InWSN4/G9mHCruxsqgZuxyuh+2dwRZ81MBi5eWujRG9lm
            Whjy0MKEMVt7Gc4iz37Yp1idSbppPBikjM6BieSMU9T19vwY2C+fiKYasTb8RrfS
            XgHyHAl9t1VWZzJYJQ9DFzYf+xHTvuNI41ke5aGu/qWQTmMOJNMgORti7Ei6VJCT
            vLbMmBVlzzF5eb6LilNk6uH+QqeKqGDU/n85FB6OZ5su5klLLxn0Tg1ScKsk2dU=
            =qscS
            -----END PGP MESSAGE-----
        fp: DA8002060402EC39B195451D5CED80362B5A4EF2
    -   created_at: '2021-02-11T20:34:10Z'
        enc: |
            -----BEGIN PGP MESSAGE-----

            hQIMA8ORz3KkY6O4ARAAm678b5ewrGBhCpt1LWyV+rJoaNdOWc+7e8aPNKwBOc7Y
            /r505aGAV6+NbtUrkHlMO6/BgTj4jdVNaQabCGC4lYhLdwd7jolRGoSxBwDZS5om
            fVSQsjESIDNTEBcuBWhxN6bBDUzV5m2DAr+0Hi94sKP8gkIk6qVtqU6p6hZKCkG5
            NxD0iBxn4r942+pehhiYZqJarPGGz016cTB+1cJhmB/ZDidfq4U/c28hhEHgrKBW
            le2C9xZsK7EF/bK6oqqHFfdJB7Lp83Ka5xHuJ7SoldAGK3wuF6ZjqSGrmyz6IhPH
            h59lOBk3PW8723TmQl1onTDb2WYKgjUJiqDRXrpTvRdjDttQpB+jfRVqzvKtqFg/
            4cL/xlZW+TcEV9Qzu66XoNqdVb/e7KqFEcXwus0A1SzIdQ+W0TQpWqFZnnNJHYcQ
            ez0pWOdM2ol1baogdn+sR4o3hSS14Wbhzz3xMeH9vAwPHKIpfLAepioJJxEhoqcN
            YESCllm8EVRO8Tmxj70EBAz2TbZJuIN+Hm1dzFzqbSBUlTOrW+jAqsxCAcXG3vZ2
            gwJN/2BC1CmCS1SLpQDxKKYJwn6JEHA8REH7u65Y0gUONZPSpiy+Lpi49rmIKU01
            D20NyhnYSJsQYB6/xfrSz5HPJJLMcqLuW841AVNKfM+XjldGPz7y53xEEY/RSiHS
            XgFWjOVrUnpFAHmXV4Qkm7ETSIQ7hT40GfIs+KXonDoHiouzre3G/4d+YwizIlYb
            uXYzqpclwhomKFJKmXjtfhpSmfH54dcA02alRT7wJB4X7ysUu1PDyPbUiieWwK4=
            =r9eu
            -----END PGP MESSAGE-----
        fp: 76DAFEBE0E21604BB9F2D6C11850C928A0D756C8
    encrypted_regex: ^secret$|^clientSecret$
    version: 3.6.1
