---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: step-certificates
  namespace: network
spec:
  releaseName: step-certificates
  interval: 5m
  chart:
    spec:
      chart: step-certificates
      version: 1.16.0
      sourceRef:
        kind: GitRepository
        name: carpenike-stepca-charts-git
        namespace: flux-system
      interval: 5m
  values:
    image:
      repository: smallstep/step-ca
      tag: 0.15.6
    ca:
      name: Holthome CA
      db:
        storageClass: longhorn
      url: "https://pki.holthome.net"
      dns: "https://pki.holthome.net"
    service:
      type: LoadBalancer
      annotations:
        external-dns.alpha.kubernetes.io/hostname: "pki.holthome.net"
      externalIPs:
      - 10.45.10.19
      externalTrafficPolicy: Local
